# 画面仕様書

## 1. 画面一覧

| 画面ID | 画面名 | ファイルパス | 説明 |
|--------|--------|--------------|------|
| SC-001 | メイン画面 | app/page.tsx | 掲示板のメイン画面 |

## 2. 画面詳細

### 2.1 メイン画面（SC-001）

#### 2.1.1 画面概要
掲示板アプリケーションのメイン画面。投稿の作成、一覧表示、編集、削除のすべての機能を含む単一ページアプリケーション。

#### 2.1.2 画面レイアウト

```
┌─────────────────────────────────────────────┐
│              ヘッダー                         │
│         「シンプル掲示板」                     │
├─────────────────────────────────────────────┤
│    オフライン警告バナー（条件付き表示）         │
│  「⚠️ オフラインモードで動作中...」            │
├─────────────────────────────────────────────┤
│           新規投稿フォーム                     │
│  ┌─────────────────────────────────────┐   │
│  │ タイトル: [_______________]          │   │
│  │ 投稿者名: [_______________]          │   │
│  │ 内容: [_______________] (XX/140)     │   │
│  │      [投稿する]                      │   │
│  └─────────────────────────────────────┘   │
├─────────────────────────────────────────────┤
│           投稿一覧                           │
│  ┌─────────────────────────────────────┐   │
│  │ 投稿1                               │   │
│  │ [編集] [削除]                       │   │
│  └─────────────────────────────────────┘   │
│  ┌─────────────────────────────────────┐   │
│  │ 投稿2                               │   │
│  │ [編集] [削除]                       │   │
│  └─────────────────────────────────────┘   │
│              ...                            │
└─────────────────────────────────────────────┘
```

#### 2.1.3 画面構成要素

##### ヘッダー部
| 項目 | 内容 | スタイル |
|------|------|----------|
| タイトル | シンプル掲示板 | 文字サイズ: 3xl、太字、青色(blue-600) |

##### オフライン警告バナー
| 項目 | 表示条件 | スタイル |
|------|----------|----------|
| 警告メッセージ | MongoDB接続失敗時 | 背景: 黄色(yellow-100)、枠線: 黄色(yellow-400) |
| アイコン | ⚠️ | 文字サイズ: xl |
| メッセージ | オフラインモードで動作中。データは一時的に保存されます。 | 文字色: 黄色(yellow-800) |

##### 新規投稿フォーム（PostFormコンポーネント）
| 項目 | 型 | 制約 | 説明 |
|------|-----|------|------|
| タイトル | テキスト入力 | 必須、最大100文字 | 投稿のタイトル |
| 投稿者名 | テキスト入力 | 必須、最大50文字 | 投稿者の名前 |
| 内容 | テキストエリア | 必須、最大140文字 | 投稿の本文 |
| 文字数カウンター | 表示のみ | - | (現在文字数/140)形式で表示 |
| 投稿ボタン | ボタン | - | クリックで投稿処理実行 |

##### 投稿一覧（PostListコンポーネント）
| 状態 | 表示内容 |
|------|----------|
| 投稿あり | PostItemコンポーネントのリスト |
| 投稿なし | 「まだ投稿がありません」メッセージ |
| ローディング中 | 「読み込み中...」メッセージ |

##### 投稿アイテム（PostItemコンポーネント）
| 項目 | 表示内容 | スタイル |
|------|----------|----------|
| タイトル | 投稿タイトル | 文字サイズ: lg、太字 |
| 投稿者名 | 投稿者名 | 文字色: グレー(gray-600) |
| 投稿日時 | YYYY年MM月DD日 HH:mm形式 | 文字サイズ: sm、文字色: グレー(gray-500) |
| 内容 | 投稿本文 | 200文字超の場合は省略表示 |
| 続きを読むリンク | 200文字超の場合のみ表示 | 文字色: 青(blue-500) |
| 編集ボタン | 「編集」 | 背景: 青(blue-500)、ホバー時: blue-600 |
| 削除ボタン | 「削除」 | 背景: 赤(red-500)、ホバー時: red-600 |

##### 編集フォーム（EditFormコンポーネント）
| 項目 | 型 | 制約 | 説明 |
|------|-----|------|------|
| タイトル | テキスト入力 | 必須、最大100文字 | 既存値で初期化 |
| 投稿者名 | テキスト入力 | 必須、最大50文字 | 既存値で初期化 |
| 内容 | テキストエリア | 必須、最大140文字 | 既存値で初期化 |
| 保存ボタン | ボタン | - | 変更を保存 |
| キャンセルボタン | ボタン | - | 編集をキャンセル |

#### 2.1.4 画面遷移
単一ページアプリケーションのため、画面遷移はなし。すべての操作は同一画面内で完結。

#### 2.1.5 バリデーション

##### クライアント側バリデーション
| 項目 | バリデーション内容 | エラー表示 |
|------|-------------------|------------|
| 必須チェック | 空白のみの入力を禁止 | アラート表示 |
| 文字数制限 | 140文字超過を禁止 | リアルタイム表示、赤色枠線 |
| 投稿中の二重送信 | 投稿ボタンを無効化 | ボタンをグレーアウト |

##### サーバー側バリデーション
| 項目 | バリデーション内容 | エラー応答 |
|------|-------------------|------------|
| 必須チェック | Mongoose schemaで検証 | 400エラー |
| 文字数制限 | Mongoose schemaで検証 | 400エラー |

#### 2.1.6 イベント処理

| イベント | トリガー | 処理内容 |
|----------|----------|----------|
| 投稿作成 | 投稿ボタンクリック | POSTリクエスト送信、一覧更新 |
| 編集開始 | 編集ボタンクリック | 編集フォーム表示 |
| 編集保存 | 保存ボタンクリック | PUTリクエスト送信、一覧更新 |
| 編集キャンセル | キャンセルボタンクリック | 通常表示に戻る |
| 投稿削除 | 削除ボタンクリック | 確認ダイアログ表示→DELETEリクエスト |
| 続きを読む | リンククリック | 全文表示切り替え |
| ページ読み込み | 初回アクセス時 | 投稿一覧を取得 |

## 3. UI/UXデザイン仕様

### 3.1 カラーパレット

| 用途 | カラーコード | Tailwind Class |
|------|-------------|----------------|
| プライマリ | #3B82F6 | blue-500 |
| プライマリ（ホバー） | #2563EB | blue-600 |
| 成功 | #10B981 | green-500 |
| 危険 | #EF4444 | red-500 |
| 警告 | #F59E0B | yellow-500 |
| 背景 | #F3F4F6 | gray-100 |
| テキスト | #111827 | gray-900 |

### 3.2 フォント仕様

| 要素 | サイズ | ウェイト | Tailwind Class |
|------|--------|----------|----------------|
| ページタイトル | 36px | Bold | text-3xl font-bold |
| セクションタイトル | 20px | Bold | text-xl font-bold |
| 投稿タイトル | 18px | Bold | text-lg font-bold |
| 本文 | 16px | Normal | text-base |
| 補足情報 | 14px | Normal | text-sm |

### 3.3 スペーシング

| 要素 | マージン/パディング | Tailwind Class |
|------|---------------------|----------------|
| コンテナ | max-width: 800px | max-w-4xl |
| カード内padding | 24px | p-6 |
| セクション間隔 | 32px | mb-8 |
| フォーム要素間隔 | 16px | space-y-4 |
| ボタン内padding | 8px 16px | py-2 px-4 |

### 3.4 レスポンシブデザイン

| ブレークポイント | 幅 | 対応内容 |
|-----------------|-----|----------|
| モバイル | < 640px | 1カラムレイアウト、フォントサイズ調整 |
| タブレット | 640px - 1024px | パディング調整 |
| デスクトップ | > 1024px | 最大幅800px、中央配置 |

### 3.5 アニメーション

| 要素 | アニメーション | 実装方法 |
|------|--------------|----------|
| ボタンホバー | 色の遷移 | transition-colors |
| ローディングスピナー | 回転 | animate-spin |
| フォーカス | リング表示 | focus:ring-2 |
| 無効化状態 | カーソル変更 | disabled:cursor-not-allowed |

## 4. アクセシビリティ仕様

### 4.1 基本要件
- すべてのフォーム要素にラベルを設定
- キーボード操作（Tab）で全要素にアクセス可能
- フォーカス時の視覚的フィードバック
- 適切な見出し階層構造

### 4.2 WAI-ARIA対応
| 要素 | ARIA属性 | 用途 |
|------|----------|------|
| ローディング状態 | aria-busy="true" | スクリーンリーダー通知 |
| エラーメッセージ | role="alert" | エラー通知 |
| 必須フィールド | aria-required="true" | 必須項目の明示 |

## 5. エラー表示仕様

### 5.1 エラータイプ別表示

| エラータイプ | 表示方法 | メッセージ例 |
|-------------|----------|--------------|
| 必須項目エラー | アラートダイアログ | 「すべての項目を入力してください」 |
| 文字数超過 | インライン表示 | 赤色の枠線、文字カウンター |
| 通信エラー | アラートダイアログ | 「投稿の作成に失敗しました」 |
| サーバーエラー | アラートダイアログ | 「エラーが発生しました」 |

### 5.2 エラー時の画面状態
- 入力フィールドの枠線を赤色に変更
- エラーメッセージを該当フィールド下部に表示
- 送信ボタンを無効化（バリデーションエラー時）

## 6. 特記事項

### 6.1 ブラウザ対応
- Chrome 90以上
- Firefox 88以上
- Safari 14以上
- Edge 90以上

### 6.2 パフォーマンス考慮
- 投稿一覧は最新順で表示（インデックス使用推奨）
- 長文投稿の初期表示は200文字に制限
- 画像やメディアファイルは現在未対応

### 6.3 国際化対応
- 現在は日本語のみ対応
- 日付フォーマットは日本標準形式
- タイムゾーンはサーバー設定に依存