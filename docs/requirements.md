# 要件定義書

## 1. プロジェクト概要

### 1.1 システム名
シンプル掲示板アプリケーション（my-board-app）

### 1.2 目的
ユーザーが投稿を作成、閲覧、編集、削除できるシンプルな掲示板システムを提供する。

### 1.3 対象ユーザー
- インターネットにアクセス可能な一般ユーザー
- 日本語を理解できるユーザー

## 2. 機能要件

### 2.1 投稿管理機能

#### 2.1.1 投稿作成機能
- ユーザーは新規投稿を作成できる
- 投稿には以下の情報を含む：
  - タイトル（必須、最大100文字）
  - 投稿者名（必須、最大50文字）
  - 内容（必須、最大140文字）
- 投稿時にローディング表示を行う
- 空白のみの投稿は禁止する
- 投稿成功後、自動的に投稿一覧を更新する

#### 2.1.2 投稿一覧表示機能
- すべての投稿を新着順（作成日時の降順）で表示する
- 各投稿には以下を表示：
  - タイトル
  - 投稿者名
  - 内容（200文字を超える場合は省略表示）
  - 作成日時（日本語フォーマット）
- 投稿が存在しない場合は「まだ投稿がありません」と表示

#### 2.1.3 投稿編集機能
- 各投稿に編集ボタンを配置
- 編集モードでインライン編集が可能
- 編集時も必須項目の検証を実施
- 保存とキャンセルの選択が可能

#### 2.1.4 投稿削除機能
- 各投稿に削除ボタンを配置
- 削除前に確認ダイアログを表示
- 削除成功後、自動的に投稿一覧を更新

### 2.2 オフラインモード機能
- MongoDBに接続できない場合、自動的にメモリ内モックデータベースに切り替え
- オフラインモード時は画面上部に警告バナーを表示
- 機能制限なくCRUD操作が可能（ただしデータは永続化されない）

## 3. 非機能要件

### 3.1 性能要件
- 投稿一覧の取得は3秒以内に完了
- 投稿の作成/更新/削除は2秒以内に完了
- 同時アクセス数：想定10ユーザー

### 3.2 セキュリティ要件
- 入力値の検証（クライアント側とサーバー側の両方）
- XSS対策（Reactの自動エスケープ機能を利用）
- SQLインジェクション対策（MongooseのORMを使用）

### 3.3 ユーザビリティ要件
- レスポンシブデザイン（モバイル・タブレット・デスクトップ対応）
- 日本語UI
- 視覚的フィードバック（ローディング表示、エラーメッセージ）
- キーボード操作対応

### 3.4 可用性要件
- MongoDB障害時もオフラインモードで継続利用可能
- エラー発生時も適切なエラーメッセージを表示
- ブラウザの更新ボタンで最新状態を取得可能

### 3.5 保守性要件
- TypeScriptによる型安全性の確保
- コンポーネント単位での機能分割
- 明確なディレクトリ構造
- エラーログの記録

## 4. 制約事項

### 4.1 技術的制約
- Next.js 15.4.5（App Router）を使用
- React 19.1.0を使用
- MongoDB（Mongoose 8.17.1）を使用
- Tailwind CSS v4を使用
- TypeScriptを使用

### 4.2 環境制約
- Node.js 18.17以上が必要
- MongoDB 4.4以上が推奨
- モダンブラウザ（Chrome、Firefox、Safari、Edge）をサポート

### 4.3 データ制約
- 投稿内容は140文字以内（Twitter風の文字数制限）
- オフラインモードのデータはサーバー再起動で消失
- 日本語文字を含むUTF-8エンコーディングをサポート

## 5. 用語定義

| 用語 | 説明 |
|------|------|
| 投稿 | ユーザーが作成するメッセージの単位 |
| オフラインモード | MongoDBに接続できない際の代替動作モード |
| インライン編集 | 一覧画面上で直接編集できる機能 |
| モックデータベース | メモリ内で動作する仮想的なデータベース |
| CRUD | Create（作成）、Read（読取）、Update（更新）、Delete（削除）の基本操作 |
| MongoDB | ドキュメント指向のNoSQLデータベース |
| Mongoose | MongoDB用のObject Data Modeling (ODM)ライブラリ |
| Next.js | Reactベースのフルスタックウェブアプリケーションフレームワーク |
| App Router | Next.js 13以降で導入された新しいルーティングシステム |
| TypeScript | JavaScriptに静的型付けを追加したプログラミング言語 |
| Tailwind CSS | ユーティリティファーストのCSSフレームワーク |
| レスポンシブデザイン | 画面サイズに応じて自動的にレイアウトが調整されるデザイン |
| API | Application Programming Interface（アプリケーション間の通信規約） |
| REST | Representational State Transfer（Web APIの設計思想） |
| JSON | JavaScript Object Notation（データ交換形式） |
| UTC | 協定世界時（Coordinated Universal Time） |
| JST | 日本標準時（Japan Standard Time、UTC+9） |

## 6. 今後の拡張候補

### 6.1 機能拡張
- ページネーション機能（大量投稿への対応）
- 検索機能（タイトル、内容、投稿者名での検索）
- タグ機能（投稿の分類）
- いいね機能（投稿への反応）
- 返信機能（スレッド形式での議論）

### 6.2 認証・認可
- ユーザー登録・ログイン機能
- 投稿者のみ編集・削除可能にする権限管理
- 管理者機能（不適切な投稿の削除）

### 6.3 メディア対応
- 画像アップロード機能
- 動画埋め込み機能
- ファイル添付機能

### 6.4 リアルタイム機能
- WebSocketによるリアルタイム更新
- 新着投稿の通知
- オンラインユーザー数の表示

## 7. 承認事項

本要件定義書は、現在実装されている機能に基づいて作成されています。
今後の機能追加や変更については、別途要件定義の更新が必要です。

## 8. 改訂履歴

| 版数 | 更新日 | 更新者 | 更新内容 |
|------|--------|--------|----------|
| 1.0 | 2025-08-09 | - | 初版作成 |