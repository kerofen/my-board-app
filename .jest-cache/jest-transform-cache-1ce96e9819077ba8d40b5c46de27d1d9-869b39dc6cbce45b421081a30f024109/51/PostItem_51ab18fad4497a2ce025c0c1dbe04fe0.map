{"version":3,"names":["PostItem","post","onPostDeleted","cov_1w9smdpcjy","f","isEditing","setIsEditing","s","_react","useState","isExpanded","setIsExpanded","handleDelete","confirm","b","response","fetch","_id","method","data","json","success","alert","error","console","formatDate","dateString","date","Date","toLocaleString","_jsxruntime","jsx","_EditForm","default","onCancel","onSaved","jsxs","className","title","author","createdAt","onClick","content","length","Fragment","substring"],"sources":["C:\\Users\\janne\\Documents\\workspace\\my-board-app\\components\\PostItem.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { Post } from '@/app/page';\nimport EditForm from './EditForm';\n\ninterface PostItemProps {\n  post: Post;\n  onPostDeleted: () => void;\n}\n\nexport default function PostItem({ post, onPostDeleted }: PostItemProps) {\n  const [isEditing, setIsEditing] = useState(false);\n  const [isExpanded, setIsExpanded] = useState(false);\n\n  const handleDelete = async () => {\n    if (!confirm('本当に削除しますか？')) {\n      return;\n    }\n\n    try {\n      const response = await fetch(`/api/posts/${post._id}`, {\n        method: 'DELETE',\n      });\n\n      const data = await response.json();\n\n      if (data.success) {\n        onPostDeleted();\n      } else {\n        alert('削除に失敗しました');\n      }\n    } catch (error) {\n      console.error('エラー:', error);\n      alert('削除に失敗しました');\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleString('ja-JP');\n  };\n\n  if (isEditing) {\n    return (\n      <EditForm\n        post={post}\n        onCancel={() => setIsEditing(false)}\n        onSaved={() => {\n          setIsEditing(false);\n          onPostDeleted();\n        }}\n      />\n    );\n  }\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-md p-6\">\n      <div className=\"flex justify-between items-start mb-4\">\n        <div className=\"flex-1\">\n          <h3 className=\"text-xl font-bold mb-2\">{post.title}</h3>\n          <div className=\"text-sm text-gray-600 space-x-4\">\n            <span>投稿者: {post.author}</span>\n            <span>{formatDate(post.createdAt)}</span>\n          </div>\n        </div>\n        <div className=\"flex space-x-2\">\n          <button\n            onClick={() => setIsEditing(true)}\n            className=\"px-3 py-1 text-sm bg-green-500 text-white rounded hover:bg-green-600 transition-colors\"\n          >\n            編集\n          </button>\n          <button\n            onClick={handleDelete}\n            className=\"px-3 py-1 text-sm bg-red-500 text-white rounded hover:bg-red-600 transition-colors\"\n          >\n            削除\n          </button>\n        </div>\n      </div>\n\n      <div className=\"text-gray-800\">\n        {isExpanded || post.content.length <= 200 ? (\n          <p className=\"whitespace-pre-wrap\">{post.content}</p>\n        ) : (\n          <>\n            <p className=\"whitespace-pre-wrap\">{post.content.substring(0, 200)}...</p>\n            <button\n              onClick={() => setIsExpanded(true)}\n              className=\"text-blue-500 hover:underline mt-2\"\n            >\n              続きを読む\n            </button>\n          </>\n        )}\n        {isExpanded && post.content.length > 200 && (\n          <button\n            onClick={() => setIsExpanded(false)}\n            className=\"text-blue-500 hover:underline mt-2 block\"\n          >\n            折りたたむ\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]}